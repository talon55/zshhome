# ASDF Version Manager support

# Get asdf.sh location
if hash brew 2>/dev/null && brew list --versions asdf &>/dev/null; then
  asdf="$(brew --prefix asdf)/libexec/asdf.sh"
elif [[ -f "$HOME/.asdf/asdf.sh" ]]; then
  asdf="$HOME/.asdf/asdf.sh"
fi

# Source asdf.sh
if [[ $asdf ]]; then
  # ASDF environment variables must be set before sourcing ASDF

  # Golang-specific environment variables
  export ASDF_GOLANG_MOD_VERSION_ENABLED=true

  # NodeJS-specific environment variables
  export ASDF_NODEJS_LEGACY_FILE_DYNAMIC_STRATEGY=latest_available

  # General ASDF config
  . "$asdf"
  fpath=(${ASDF_DIR}/completions $fpath)
  export load_compinit=true
fi
